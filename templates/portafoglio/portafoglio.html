{% extends "header.html"%}
{% block title %}Il Mio Portafoglio{% endblock %}
{% block content %}

<style>
  body {
    font-family: 'Open Sans', sans-serif;
  }

  #signUpForm {
    max-width: 500px;
    background-color: #ffffff;
    margin: 40px auto;
    padding: 40px;
    box-shadow: 0px 6px 18px rgb(0 0 0 / 9%);
    border-radius: 12px;
  }

  #signUpForm .form-header {
    gap: 5px;
    text-align: center;
    font-size: .9em;
  }

  #signUpForm .form-header .stepIndicator {
    position: relative;
    flex: 1;
    padding-bottom: 30px;
  }

  #signUpForm .form-header .stepIndicator.active {
    font-weight: 600;
  }

  #signUpForm .form-header .stepIndicator.finish {
    font-weight: 600;
    color: #009688;
  }

  #signUpForm .form-header .stepIndicator::before {
    content: "";
    position: absolute;
    left: 50%;
    bottom: 0;
    transform: translateX(-50%);
    z-index: 9;
    width: 20px;
    height: 20px;
    background-color: #d5efed;
    border-radius: 50%;
    border: 3px solid #ecf5f4;
  }

  #signUpForm .form-header .stepIndicator.active::before {
    background-color: #a7ede8;
    border: 3px solid #d5f9f6;
  }

  #signUpForm .form-header .stepIndicator.finish::before {
    background-color: #009688;
    border: 3px solid #b7e1dd;
  }

  #signUpForm .form-header .stepIndicator::after {
    content: "";
    position: absolute;
    left: 50%;
    bottom: 8px;
    width: 100%;
    height: 3px;
    background-color: #f3f3f3;
  }

  #signUpForm .form-header .stepIndicator.active::after {
    background-color: #a7ede8;
  }

  #signUpForm .form-header .stepIndicator.finish::after {
    background-color: #009688;
  }

  #signUpForm .form-header .stepIndicator:last-child:after {
    display: none;
  }

  #signUpForm input {
    padding: 15px 20px;
    width: 100%;
    font-size: 1em;
    border: 1px solid #e3e3e3;
    border-radius: 5px;
  }

  #signUpForm input:focus {
    border: 1px solid #009688;
    outline: 0;
  }

  #signUpForm input.invalid {
    border: 1px solid #ffaba5;
  }

  #signUpForm .step {
    display: none;
  }

  #signUpForm .form-footer {
    overflow: auto;
    gap: 20px;
  }

  #signUpForm .form-footer button {
    background-color: #009688;
    border: 1px solid #009688 !important;
    color: #ffffff;
    border: none;
    padding: 13px 30px;
    font-size: 1em;
    cursor: pointer;
    border-radius: 5px;
    flex: 1;
    margin-top: 5px;
  }

  #signUpForm .form-footer button:hover {
    opacity: 0.8;
  }

  #signUpForm .form-footer #prevBtn {
    background-color: #fff;
    color: #009688;
  }

  #fixedbutton {
    position: fixed;
    bottom: 20px;
    right: 20px;
    z-index: 9999;
  }

  .myUL {
    list-style-type: none;
    padding: 0;
    margin: 0;
    overflow-y: scroll;
    max-height: 200px;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .myUL2 {
    list-style-type: none;
    padding: 0;
    margin: 0;
    max-height: 500px;
    overflow-y: scroll;
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  #myUL li a {
    border: 1px solid #ddd;
    margin-top: -1px;
    /* Prevent double borders */
    background-color: #f6f6f6;
    padding: 12px;
    text-decoration: none;
    font-size: 18px;
    color: black;
    display: block
  }

  #myUL li a:hover:not(.header) {
    background-color: #eee;
  }

  .hiddenRow {
    padding: 0 !important;
  }
</style>

<div class="page-holder bg-gray-100">
  <div class="container-fluid px-lg-4 px-xl-5">
    <!-- Page Header-->
    <div class="page-header">
      <h1 class="page-heading">Dashboard Clienti {{name}}</h1>
    </div>
    <section class="mb-3 mb-lg-5">
      <div class="row">
        <div class="container px-4 mt-4">
          <div class="row mb-2">
            <div class="input-group ">
              <div class="col">
                <input class="form-control" type="text" id="myInput" onkeyup="myFunction(0)" onclick="showUp(this,0)"
                  placeholder="Cerca un cliente" value="{%if current_cliente %}{{current_cliente[5]}} {%endif%}">
              </div>
            </div>
          </div>

          <ul id="myUL" class="myUL vertical-scrollable list-group">
            {% if clienti %}
            {% for cliente in clienti%}
            <input type="hidden" value="{{cliente.idcliente}}">
            <li class="list-group-item" onclick="getName(this,0,0)">{{cliente.ragionesociale}}</li>
            {% endfor %}
            {%endif%}
          </ul>
        </div>
      </div>
      {% if current_cliente %}

      <!-- Prima era container-xl-->
      <div class="row">
        <div class="container px-4 mt-4" id="modifica">
          <!--<h1 class="page-header text-center">{{current_cliente[5]}}</h1>-->
          <!-- Account details card-->
          <div class="card mb-4">
            <!--<div class="card-header"></div>-->
            <div class="card-body">
              <form action="/portafoglio/modifyCliente" method="POST">
                <input type="hidden" name="idCliente" id="idCliente" value="{{current_cliente[0]}}">
                <!-- Form Group (username)-->

                <!-- Form Row-->
                <div class="row gx-3 mb-3">
                  <!-- Form Group (first name)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="ragioneSociale">Ragione Sociale</label>
                    <input class="form-control" name="ragioneSociale" id="ragioneSociale" type="text"
                      value="{{current_cliente[5]}}">
                  </div>
                  <div class="col-md-2">
                    <label class="small mb-1" for="cf">Cf</label>
                    <input class="form-control" name="cf" id="cf" type="text" value="{{current_cliente[4]}}">
                  </div>
                  <!-- Form Group (last name)-->
                  <div class="col-md-2">
                    <label class="small mb-1" for="sediTot">Numero sedi</label>
                    <input class="form-control" name="sediTot" id="sediTot" type="tel" value="{{current_cliente[12]}}">
                  </div>
                  <div class="col-md-2">
                    <label class="small mb-1" for="dipendenti">Numero dipendenti</label>
                    <input class="form-control" name="dipendenti" id="dipendenti" type="text"
                      value="{{current_cliente[20]}}">
                  </div>
                  <div class="col-md-2">
                    <label class="small mb-1" for="nLineeTot">Numero linee totali</label>
                    <input class="form-control" name="nLineeTot" id="nLineeTot" type="text"
                      value="{{current_cliente[13]}}">
                  </div>

                </div>
                <!-- Form Row        -->
                <div class="row gx-3 mb-3">
                  <!-- Form Group (organization name)-->
                  <div class="col-md-5">
                    <label class="small mb-1" for="indirizzo">Indirizzo</label>
                    <input class="form-control" name="indirizzo" id="indirizzo" type="text"
                      value="{{current_cliente[7]}}">
                  </div>
                  <!-- Form Group (location)-->
                  <div class="col-md-2">
                    <label class="small mb-1" for="capPrincipale">CAP</label>
                    <input class="form-control" name="capPrincipale" id="capPrincipale" type="text"
                      value="{{current_cliente[9]}}">
                  </div>
                  <div class="col-md-2">
                    <label class="small mb-1" for="comunePrincipale">Comune</label>
                    <input class="form-control" name="comunePrincipale" id="comunePrincipale" type="text"
                      value="{{current_cliente[10]}}">
                  </div>
                  <div class="col-lg-3">
                    <label class="small mb-1" for="presidio">Presidio</label>
                    <input class="form-control" name="presidio" id="presidio" type="text"
                      value="{% if current_cliente[6]%}{{current_cliente[6]}}{% endif%}">
                  </div>
                </div>
                <!-- Form Row-->
                <div class="row gx-3 mb-3">
                  <!-- Form Group (phone number)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="fisso">Fisso</label>
                    <input class="form-control" name="fisso" id="fisso" type="tel" value="{{current_cliente[14]}}">
                  </div>
                  <!-- Form Group (birthday)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="mobile">Mobile</label>
                    <input class="form-control" name="mobile" id="mobile" type="text" value="{{current_cliente[15]}}">
                  </div>
                  <div class="col-md-4">
                    <label class="small mb-1" for="totale">Totale</label>
                    <input class="form-control" name="totale" id="totale" type="text" value="{{current_cliente[16]}}">
                  </div>
                </div>
                <div class="row gx-3 mb-3">
                  <!-- Form Group (phone number)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="fatturatoCerved">Fatturato Cerved</label>
                    <input class="form-control" name="fatturatoCerved" id="fatturatoCerved" type="tel"
                      value="{% if current_cliente[17]%}{{current_cliente[17]}}{%else%}0.0{% endif%}">
                  </div>
                  <!-- Form Group (birthday)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="fatturatoTim">Fatturato TIM</label>
                    <input class="form-control" name="fatturatoTim" id="fatturatoTim" type="text"
                      value="{% if current_cliente[19]%}{{current_cliente[19]}}{%else%}0.0{% endif%}">
                  </div>
                </div>
                <!-- Save changes button-->
                <button class="btn btn-primary" type="submit">Salva le modifiche</button>
                <button class="btn btn-danger" type="button" onclick="eliminaCliente({{current_cliente[0]}})"
                  style="margin-left: 10px;"><i class="fa fa-trash"></i></button>
                <button class="btn btn-primary" type="button" style="float: right;" id="btnCrea">Aggiungi
                  cliente</button>
              </form>
            </div>
          </div>
        </div>
        <div class="container px-4 mt-4" id="crea" style="display: none;">
          <!-- Account details card-->
          <div class="card mb-4">
            <div class="card-header page-heading">Aggiungi un nuovo cliente</div>
            <div class="card-body">
              <form action="/portafoglio/add" method="POST">
                <input type="hidden" name="idCliente" id="idCliente" value="">
                <input type="hidden" name="idPort" value="{{idPort}}">
                <div class="row gx-3 mb-3">
                  <!-- Form Group (first name)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="ragioneSociale">Ragione Sociale</label>
                    <input class="form-control cfcl" name="ragioneSociale" id="ragioneSociale" type="text" value="">
                  </div>
                  <div class="col-md-2">
                    <label class="small mb-1" for="cf">Cf</label>
                    <input class="form-control cfcl" name="cf" id="cf" type="text" value="">
                  </div>
                  <!-- Form Group (last name)-->
                  <div class="col-md-2">
                    <label class="small mb-1" for="sediTot">Numero sedi</label>
                    <input class="form-control cfcl" name="sediTot" id="sediTot" type="number" value="">
                  </div>
                  <div class="col-md-2">
                    <label class="small mb-1" for="dipendenti">Numero dipendenti</label>
                    <input class="form-control cfcl" name="dipendenti" id="dipendenti" type="number" value="">
                  </div>
                  <div class="col-md-2">
                    <label class="small mb-1" for="nLineeTot">Numero linee totali</label>
                    <input class="form-control cfcl" name="nLineeTot" id="nLineeTot" type="number" value="">
                  </div>
                </div>
                <!-- Form Row -->
                <div class="row gx-3 mb-3">
                  <!-- Form Group (organization name)-->
                  <div class="col-md-5">
                    <label class="small mb-1" for="indirizzo">Indirizzo</label>
                    <input class="form-control cfcl" name="indirizzo" id="indirizzo" type="text" value="">
                  </div>
                  <!-- Form Group (location)-->
                  <div class="col-md-2">
                    <label class="small mb-1" for="capPrincipale">CAP</label>
                    <input class="form-control cfcl" name="capPrincipale" id="capPrincipale" type="text" value="">
                  </div>
                  <div class="col-md-2">
                    <label class="small mb-1" for="inputLocation">Comune</label>
                    <input class="form-control cfcl" name="comunePrincipale" id="inputLocation" type="text" value="">
                  </div>
                  <div class="col-lg-3">
                    <label class="small mb-1" for="inputLastName">Presidio</label>
                    <input class="form-control cfcl" name="presidio" id="inputLastName" type="text" value="">
                  </div>
                </div>
                <!-- Form Row-->
                <div class="row gx-3 mb-3">
                  <!-- Form Group (phone number)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="inputPhone">Fisso</label>
                    <input class="form-control cfcl" name="fisso" id="inputPhone" type="tel" value="">
                  </div>
                  <!-- Form Group (birthday)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="inputBirthday">Mobile</label>
                    <input class="form-control cfcl" name="mobile" id="inputBirthday" type="text" value="">
                  </div>
                  <div class="col-md-4">
                    <label class="small mb-1" for="inputBirthday">Totale</label>
                    <input class="form-control cfcl" name="totale" id="inputBirthday" type="text" value="">
                  </div>
                </div>
                <div class="row gx-3 mb-3">
                  <!-- Form Group (phone number)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="inputPhone">Fatturato Cerved</label>
                    <input class="form-control cfcl" name="fatturatoCerved" id="inputPhone" type="number" value="">
                  </div>
                  <!-- Form Group (birthday)-->
                  <div class="col-md-4">
                    <label class="small mb-1" for="inputBirthday">Fatturato TIM</label>
                    <input class="form-control cfcl" name="fatturatoTim" id="inputBirthday" type="number" value="">
                  </div>
                </div>
                <!-- Save changes button-->
                <button class="btn btn-primary" type="submit">Aggiungi cliente</button>
                <button class="btn btn-primary" type="button" id="cleanFormCliente" onclick="clean('cfcl')">Cancella
                  tutto</button>
                <button class="btn btn-primary" type="button" style="float: right;"
                  onclick="hideAddCliente()">Annulla</button>
              </form>
            </div>
          </div>


        </div>
      </div>

      {% if trattative%}
      <div class="row">

        <div class="container px-4 mt-4">
          <h1 class="page-heading">Trattative</h1>
          <table class="table table-condensed" style="border-collapse:collapse;">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Andamento</th>
                <th>Data Chiusura</th>
              </tr>
            </thead>
            <tbody>

              {% for i in range (0, t_len) %}
              <tr data-bs-toggle="modal" data-bs-target="#staticBackdrop{{i}}">
                <td>{% if trattative[i][8]%}{{trattative[i][8]}}{%else%}Non definito{%endif%}</td>
                <td>{% if trattative[i][25] %} {{trattative[i][24]}} {%else%}Sconosciuto{%endif%}</td>
                <td>{% if trattative[i][18] %} {{trattative[i][18]}} {%else%}Non indicata {%endif%}</td>
              </tr>
              <div class="modal fade" id="staticBackdrop{{i}}" data-bs-backdrop="static" data-bs-keyboard="false"
                tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="staticBackdropLabel">{{trattative[i][8]}}</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form action="/portafoglio/modifyTrattativa/{{trattative[i][0]}}" method="POST">
                      <div class="modal-body">
                        <div class="row">
                          <div class="{% if trattative[i][26] %}col-md-9{%else%}{%endif%}" id="modifica">
                            <!-- Account details card-->
                            <div class="row mb-4">
                              <!--<div class="card-header">Modifica</div>-->
                              <input type="hidden" name="idPortModify" id="idCliente" value="{{idPort}}">
                              <input type="hidden" name="idClienteModify" id="idCliente" value="{{trattative[i][2]}}">
                              <!-- Form Group (username)-->
                              <div class="row gx-3 mb-3">
                                <div class="col-md-4">
                                  <label class="small mb-1" for="codiceCtrDigitaliModify">codiceCtrDigitali</label>
                                  <input class="form-control" name="codiceCtrDigitaliModify"
                                    id="codiceCtrDigitaliModify" type="text"
                                    value="{% if trattative[i][3] %}{{trattative[i][3]}}{%endif%}">
                                </div>
                                <div class="col-md-4">
                                  <label class="small mb-1" for="codiceSalesHubModify">codiceSalesHub</label>
                                  <input class="form-control" name="codiceSalesHubModify" id="codiceSalesHubModify"
                                    type="text" value="{% if trattative[i][4] %}{{trattative[i][4]}}{%endif%}">
                                </div>
                                <div class="col-md-4">
                                  <label class="small mb-1" for="zonaModify">zona</label>
                                  <input class="form-control" name="zonaModify" id="zonaModify" type="text"
                                    value="{% if trattative[i][6] %}{{trattative[i][6]}}{%endif%}">
                                </div>


                              </div>
                              <!-- Form Row-->
                              <div class="row gx-3 mb-3">
                                <!-- Form Group (first name)-->
                                <div class="col-md-6">
                                  <label class="small mb-1" for="nomeOpportunitaModify">nomeOpportunita</label>
                                  <input class="form-control" name="nomeOpportunitaModify" id="nomeOpportunitaModify"
                                    type="text" value="{% if trattative[i][8] %}{{trattative[i][8]}}{%endif%}">

                                </div>
                                <!-- Form Group (last name)-->
                                <div class="col-md-6">
                                  <label class="small mb-1" for="tipoModify">tipo</label>
                                  <input class="form-control" name="tipoModify" id="tipoModify" type="text"
                                    value="{% if trattative[i][7] %}{{trattative[i][7]}}{%endif%}">

                                </div>
                              </div>
                              <!-- Form Row        -->
                              <div class="row gx-3 mb-3">
                                <!-- Form Group (location)-->
                                <div class="col-md-6">
                                  <label class="small mb-1"
                                    for="dataCreazioneOpportunitaModify">dataCreazioneOpportunita</label>
                                  <input class="form-control" name="dataCreazioneOpportunitaModify"
                                    id="dataCreazioneOpportunitaModify" type="date"
                                    value="{% if trattative[i][9] %}{{trattative[i][9]}}{%endif%}">
                                </div>
                                <div class="col-md-6">
                                  <label class="small mb-1" for="dataChiusuraModify">dataChiusura</label>
                                  <input class="form-control" name="dataChiusuraModify" id="dataChiusuraModify"
                                    type="date" value="{% if trattative[i][18] %}{{trattative[i][18]}}{%endif%}">
                                </div>
                              </div>
                              <!-- Form Row-->
                              <div class="row gx-3 mb-3">
                                <!-- Form Group (phone number)-->
                                <div class="col-md-3">

                                  <label class="small mb-1" for="faseModify">fase</label>
                                  <select class="form-select" name="faseModify" aria-label="Default select example"
                                    id="faseOptions">
                                    <option value="{% if trattative[i][19] %}{{trattative[i][19]}}{%endif%}" selected>
                                      {% if trattative[i][24] %}{{trattative[i][24]}}{%endif%}</option>
                                    {% for a in andamento %}

                                    <option value="{{a.idandamento}}">{{a.nome}}</option>
                                    {% endfor %}
                                  </select>

                                </div>
                                <!-- Form Group (birthday)-->
                                <div class="col-md-3">
                                  <label class="small mb-1" for="inputBirthday">categoriaOffertaIT</label>
                                  <select class="form-select" aria-label="Default select example" id="categoriaOptions"
                                    name="categoriaOffertaITModify">
                                    <option value="{% if trattative[i][12] %}{{trattative[i][12]}}{%endif%}" selected>
                                      {% if trattative[i][25] %}{{trattative[i][25]}}{%endif%}</option>
                                    {% for c in categorie %}
                                    <option value="{{c.idcategoria}}">{{c.nome}}</option>
                                    {% endfor %}

                                  </select>
                                </div>
                                <div class="col-md-3">
                                  <label class="small mb-1" for="probabilitaModify">probabilita</label>
                                  <input class="form-control" name="probabilitaModify" id="probabilitaModify"
                                    type="text" value="{% if trattative[i][21] %}{{trattative[i][21]}}%{%endif%}">
                                </div>
                                <div class="col-md-3">
                                  <label class="small mb-1" for="inPafModify">inPaf</label>
                                  <input class="form-control" name="inPafModify" id="inPafModify" type="text"
                                    value="{% if trattative[i][22] %}{{trattative[i][22]}}{%endif%}">
                                </div>

                              </div>


                              <!-- Form Row-->
                              <div class="row gx-3 mb-3">
                                <!-- Form Group (phone number)-->
                                <div class="col-md-4">
                                  <label class="small mb-1" for="fixModify">fix</label>
                                  <input class="form-control" name="fixModify" id="fixModify" inputmode="decimal"
                                    id="float-input" name="float-input" pattern="[0-9]*[.,]?[0-9]*"
                                    placeholder="{%if trattative[i][10] == None %}0.0{%endif%}"
                                    value="{%if trattative[i][10]%}{{trattative[i][10]}}{%endif%}">

                                </div>
                                <!-- Form Group (birthday)-->
                                <div class="col-md-4">
                                  <label class="small mb-1" for="mobileModify">mobile</label>
                                  <input class="form-control" name="mobileModify" id="mobileModify" inputmode="decimal"
                                    id="float-input" name="float-input" pattern="[0-9]*[.,]?[0-9]*"
                                    placeholder="{%if trattative[i][11] == None %}0.0{%endif%}"
                                    value="{% if trattative[i][11] %}{{trattative[i][11]}}{%endif%}">

                                </div>
                                <div class="col-md-4">
                                  <label class="small mb-1" for="itModify">it</label>
                                  <input class="form-control" name="itModify" id="itModify" inputmode="decimal"
                                    id="float-input" name="float-input" pattern="[0-9]*[.,]?[0-9]*"
                                    placeholder="{%if trattative[i][13] == None %}0.0{%endif%}"
                                    value="{% if trattative[i][13] %}{{trattative[i][13]}}{%endif%}">

                                </div>
                              </div>
                              <div class="row gx-3 mb-3">
                                <!-- Form Group (phone number)-->
                                <div class="col-md-3">
                                  <label class="small mb-1" for="alModify">al</label>
                                  <input class="form-control" name="alModify" id="alModify" inputmode="decimal"
                                    id="float-input" name="float-input" pattern="[0-9]*[.,]?[0-9]*"
                                    value="{% if trattative[i][17] %}{{trattative[i][17]}}{%endif%}">
                                </div>
                                <!-- Form Group (birthday)-->
                                <div class="col-md-3">
                                  <label class="small mb-1" for="aomModify">aom</label>
                                  <input class="form-control" name="aomModify" id="aomModify" inputmode="decimal"
                                    id="float-input" name="float-input" pattern="[0-9]*[.,]?[0-9]*"
                                    value="{% if trattative[i][15]%}{{trattative[i][15]}}{%endif%}">

                                </div>
                                <div class="col-md-3">
                                  <label class="small mb-1" for="mnpModify">mnp</label>
                                  <input class="form-control" name="mnpModify" id="mnpModify" inputmode="decimal"
                                    id="float-input" name="float-input" pattern="[0-9]*[.,]?[0-9]*"
                                    value="{% if trattative[i][16] %}{{trattative[i][16]}}{%endif%}">
                                </div>
                                <div class="col-md-3">
                                  <label class="small mb-1" for="lineeFoniaFixModify">lineeFoniaFixModify</label>
                                  <input class="form-control" name="lineeFoniaFixModify" id="lineeFoniaFixModify"
                                    inputmode="decimal" id="float-input" name="float-input" pattern="[0-9]*[.,]?[0-9]*"
                                    value="{% if trattative[i][14]%}{{trattative[i][14]}}{%endif%}">
                                </div>
                              </div>
                              <div class="row gx-3 mb-3">
                                <!-- Form Group (phone number)-->

                                <div class="col-md-6">
                                  <label class="small mb-1" for="fornitoreModify">fornitore</label>
                                  <input class="form-control" name="fornitoreModify" id="fornitoreModify" type="text"
                                    value="{% if trattative[i][24]%}{{trattative[i][24]}}{%endif%}">
                                </div>
                                <!-- Form Group (birthday)-->
                                <div class="col-md-6">

                                  <label class="small mb-1" for="noteSpecialistaModify">noteSpecialista</label>
                                  <input class="form-control" name="noteSpecialistaModify" id="noteSpecialistaModify"
                                    type="text" value="{%if trattative[i][20] %}{{trattative[i][20]}}{%endif%}">

                                </div>


                              </div>

                              <!-- Save changes button-->


                              <!--{%if trattative[i][25] %}
                            <h5 class="page-heading">Appuntamenti assocciati</h5>
                            <div class="card-body text-muted">
                              <table class="table table-striped text-sm text-gray-700 mb-0" id="ordersDatatable">
                                <thead>
                                  <tr>
                                    <th data-sortable="" style="width: 60%;"><a href="#"
                                        class="dataTable-sorter">Titolo</a></th>
                                    <th data-sortable="" style="width: 40%;"><a href="#"
                                        class="dataTable-sorter">Data</a>
                                    </th>
                                  </tr>
                                </thead>
                                <tbody>
                                  {% for appuntamento in trattative[i][25] %}
                                  <tr class="align-middle">
                                    <td>
                                      <div class="d-flex align-items-center">
                                        <div class="pt-1"><strong>{{appuntamento.titolo}}</strong>
                                        </div>
                                      </div>
                                    </td>
                                    <td> <strong>{{appuntamento.dataApp}}</strong></td>
                                  </tr>
                                  {%endfor%}
                                </tbody>
                              </table>
                            </div>
                            {%endif%}-->

                            </div>
                          </div>
                          {% if trattative[i][26] %}
                          <div class="col-md-3 ">
                            <div class="row mb-4">
                              <div class="page-heading text-center">prossimi app.</div>
                              <div class="list-group mt-2 myUL2">
                                {% for a in trattative[i][26] %}

                                <li class="list-group-item">
                                  <div class="row mb-2">{{ a.titolo }}</div>
                                  <div class="row">{{a.dataapp}}</div>

                                </li>

                                {%endfor%}
                              </div>
                            </div>

                          </div>
                          {%endif%}
                        </div>

                        <button class="btn btn-primary" type="submit">Salva le modifiche</button>
                        <button class="btn btn-danger" onclick="sendData({{trattative[i][0]}})" type="button"
                          style="float: right;">Elimina</button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              {% endfor %}
            </tbody>
          </table>

        </div>
      </div>
      {%endif%}
      <div class="col mb-4">
        <h1 class="page-heading my-5">Aggiungi nuove trattative</h1>
        <button class="btn btn-primary mb-2" type="button" id="btnTrattativa" onclick="showTrattativa(this)">Aggiungi
          trattativa manualmente</button>
        <button class="btn btn-primary mb-2" type="button" id="btnTrattativaFile"
          onclick="showTrattativaFile(this)">Aggiungi
          trattativa da un file esterno</button>
        <div class="row mt-4 py-2" style="display: none;" id="trattativaFile">

          <form id="signUpForm" action="/home/addPortafoglio" method="post" enctype="multipart/form-data">
            <!-- start step indicators -->
            <div class="form-header d-flex mb-4">
              <span class="stepIndicator">Controllo righe</span>
              <span class="stepIndicator">Posizione righe</span>
              <span class="stepIndicator">Carica il file</span>
            </div>
            <!-- end step indicators -->

            <!-- step one -->
            <div class="step">
              <p class="mb-4">Come prima cosa, controlla che non esistano colonne <strong>nascoste</strong>. Per essere
                sicuro, le colonne
                devono andare dalla lettera 'A' alla lettera 'X'.</p>
              <p class="mb-4"> Se le righe non combaciano i problemi sono due</p>
              <ol>
                <li>Non hai trovato possibili righe nascoste</li>
                <li>Sono presenti più righe del necessario.</li>
              </ol>
              <p class="mb-4"> Se ricadi nel caso due, puoi proseguire</p>

            </div>

            <!-- step two -->
            <div class="step">
              <p class="mb-4">La <strong>posizione</strong> delle colonne è molto importante per la creazione del
                portafoglio.</p>
              <p class="mb-4">Se trovi righe non menzionate in questo elenco, <strong>cancellale</strong>. Devono essere
                presenti <strong>TUTTE</strong> e
                nel seguente <strong>ordine</strong></p>
              <ol>
                <li>CODICE CTR DIGITALE</li>
                <li>CODICE SALES HUB</li>
                <li>AREA MANAGER</li>
                <li>SA</li>
                <li>RAGIONE SOCIALE</li>
                <li>VENETO</li>
                <li>TIPO</li>
                <li>NOME OPPORTUNITA'</li>
                <li>DATA CREAZIONE OPPORTUNITA'</li>
                <li>FIX</li>
                <li>MOBILE</li>
                <li>CATEGORIA OFFERTA IT</li>
                <li>IT</li>
                <li>LINEE FONIA FIX</li>
                <li>AOM</li>
                <li>MNP</li>
                <li>AL</li>
                <li>DATA CHIUSURA</li>
                <li>FASE</li>
                <li>NOTE SPECIALISTA</li>
                <li>PROBABILITA'</li>
                <li>IN PAF</li>
                <li>FORNITORE</li>
              </ol>

              <p class="mb-4">Se non ti trovi con i nomi o con le colonne, ti lascio il <a target="_blank"
                  href="https://docs.google.com/spreadsheets/d/1KUg_MrHQoR0TzMWjXX9ZkFHMBTS6M9NX/edit?usp=sharing&ouid=102720582862606875381&rtpof=true&sd=true">link</a>
                per un file di esempio</p>
            </div>

            <!-- step three -->
            <div class="step">
              <p class="mb-4">Carica il/i file qua sotto. Poi premi il bottone 'CREA'</p>
              <div class="input-group my-2">
                <label class="small mb-1" for="fileDoc">Portafoglio</label>
                <input type="file" class="form-control" id="inputGroupFile04" aria-describedby="inputGroupFileAddon04"
                  placeholder="Inserisci il file" aria-label="Upload" name="fileDoc"
                  accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel">

              </div>
            </div>


            <!-- start previous / next buttons -->
            <div class="form-footer d-flex">
              <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
              <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
            </div>
            <!-- end previous / next buttons -->
          </form>


        </div>

        <div class="card mb-4" id="formTrattativa" style="display: none;">
          <div class="card-header">Nuova trattativa</div>
          <div class="card-body">
            <form action="/portafoglio/addTrattativaForm" method="POST">

              <input type="hidden" name="idClienteAdd" id="idCliente" value="{{current_cliente.idcliente}}">
              <!-- Form Group (username)-->
              <div class="row gx-3 mb-3">
                <div class="col-md-4">
                  <label class="small mb-1" for="codiceCtrDigitaliAdd">codiceCtrDigitali</label>
                  <input class="form-control cftr" name="codiceCtrDigitaliAdd" id="codiceCtrDigitaliAdd" type="text"
                    value="">
                </div>
                <div class="col-md-4">
                  <label class="small mb-1" for="codiceSalesHubAdd">codiceSalesHub</label>
                  <input class="form-control cftr" name="codiceSalesHubAdd" id="codiceSalesHubAdd" type="text" value="">
                </div>
                <div class="col-md-4">
                  <label class="small mb-1" for="zonaAdd">zona</label>
                  <input class="form-control cftr" name="zonaAdd" id="zonaAdd" type="text" value="">
                </div>
              </div>
              <!-- Form Row-->
              <div class="row gx-3 mb-3">
                <!-- Form Group (first name)-->
                <div class="col-md-6">
                  <label class="small mb-1" for="nomeOpportunitaAdd">nomeOpportunita</label>
                  <input class="form-control cftr" name="nomeOpportunitaAdd" id="nomeOpportunitaAdd" type="text"
                    value="" required>
                </div>
                <!-- Form Group (last name)-->
                <div class="col-md-6">
                  <label class="small mb-1" for="tipoAdd">tipo</label>
                  <input class="form-control cftr" name="tipoAdd" id="tipoAdd" type="text" value="">
                </div>
              </div>
              <!-- Form Row        -->
              <div class="row gx-3 mb-3">
                <!-- Form Group (location)-->
                <div class="col-md-6">
                  <label class="small mb-1" for="dataCreazioneOpportunitaAdd">dataCreazioneOpportunita</label>
                  <input class="form-control cftr" name="dataCreazioneOpportunitaAdd" id="dataCreazioneOpportunitaAdd"
                    type="date" value="" required>
                </div>
                <div class="col-md-6">
                  <label class="small mb-1" for="dataChiusuraAdd">dataChiusura</label>
                  <input class="form-control cftr" name="dataChiusuraAdd" id="dataChiusuraAdd" type="date" value=""
                    required>
                </div>
              </div>
              <!-- Form Row-->
              <div class="row gx-3 mb-3">
                <!-- Form Group (phone number)-->
                <div class="col-md-3">
                  <label class="small mb-1" for="faseAdd">fase</label>
                  <select class="form-select" name="faseAdd" id="faseAdd" aria-label="Default select example"
                    id="faseOptions" required>

                    {% for a in andamento %}

                    <option value="{{a.idandamento}}">{{a.nome}}</option>
                    {% endfor %}
                  </select>

                </div>
                <!-- Form Group (birthday)-->
                <div class="col-md-3">
                  <label class="small mb-1" for="inputBirthday">categoriaOffertaIT</label>
                  <select class="form-select" aria-label="Default select example" id="categoriaOptions"
                    name="categoriaOffertaITAdd" required>
                    {% for c in categorie %}
                    <option value="{{c.idcategoria}}">{{c.nome}}</option>
                    {% endfor %}

                  </select>
                </div>
                <div class="col-md-3">
                  <label class="small mb-1" for="probabilitaAdd">probabilita</label>
                  <input class="form-control cftr" name="probabilitaAdd" id="probabilitaAdd" type="text" value=""
                    required>
                </div>
                <div class="col-md-3">
                  <label class="small mb-1" for="inPafAdd">inPaf</label>
                  <input class="form-control cftr" name="inPafAdd" id="inPafAdd" type="text" value="">
                </div>
              </div>
              <!-- Form Row-->
              <div class="row gx-3 mb-3">
                <!-- Form Group (phone number)-->
                <div class="col-md-4">
                  <label class="small mb-1" for="fixAdd">fix</label>
                  <input class="form-control cftr" name="fixAdd" id="fixAdd" type="number" value="">
                </div>
                <!-- Form Group (birthday)-->
                <div class="col-md-4">
                  <label class="small mb-1" for="mobileAdd">mobile</label>
                  <input class="form-control cftr" name="mobileAdd" id="mobileAdd" type="number" value="">
                </div>
                <div class="col-md-4">
                  <label class="small mb-1" for="itAdd">it</label>
                  <input class="form-control cftr" name="itAdd" id="itAdd" type="text" value="">
                </div>
              </div>
              <div class="row gx-3 mb-3">
                <!-- Form Group (phone number)-->
                <div class="col-md-3">
                  <label class="small mb-1" for="alAdd">al</label>
                  <input class="form-control cftr" name="alAdd" id="alAdd" type="tel" value="">
                </div>
                <!-- Form Group (birthday)-->
                <div class="col-md-3">
                  <label class="small mb-1" for="aomAdd">aom</label>
                  <input class="form-control cftr" name="aomAdd" id="aomAdd" type="text" value="">
                </div>
                <div class="col-md-3">
                  <label class="small mb-1" for="mnpAdd">mnp</label>
                  <input class="form-control cftr" name="mnpAdd" id="mnpAdd" type="text" value="">
                </div>
                <div class="col-md-3">
                  <label class="small mb-1" for="lineeFoniaFixAdd">lineeFoniaFixAdd</label>
                  <input class="form-control cftr" name="lineeFoniaFixAdd" id="lineeFoniaFixAdd" type="tel" value="">
                </div>
              </div>
              <div class="row gx-3 mb-3">
                <!-- Form Group (phone number)-->
                <div class="col-md-6">
                  <label class="small mb-1" for="fornitoreAdd">fornitore</label>
                  <input class="form-control cftr" name="fornitoreAdd" id="fornitoreAdd" type="text" value="">
                </div>
                <!-- Form Group (birthday)-->
                <div class="col-md-6">
                  <label class="small mb-1" for="noteSpecialistaAdd">noteSpecialista</label>
                  <input class="form-control cftr" name="noteSpecialistaAdd" id="noteSpecialistaAdd" type="text"
                    value="">
                </div>
              </div>
              <!-- Save changes button-->
              <button class="btn btn-primary" type="submit" style="float: left;" id="btnCreaTrattativa">Aggiungi
                trattativa</button>
              <button class="btn btn-primary" type="button" style="float: right;" id="cleanFormTrattativa"
                onclick="clean('cftr')">Pulisci
                tutto</button>
            </form>
          </div>
        </div>
      </div>

      {%endif%}

      {% if getIt %}
      <div class="row">

        <div class="container px-4 mt-4">
          <h1 class="page-heading">IT</h1>
          <table class="table table-condensed" style="border-collapse:collapse;">
            <thead>
              <tr>
                <th>Servizio</th>
                <th>TGU</th>
                <th>dataAttivazione</th>
                <th>dataScadenza</th>
              </tr>
            </thead>
            <tbody>

              {% for i in range (0, getIt_len)%}
              <tr data-bs-toggle="modal" data-bs-target="#staticit{{i}}">
                <td>{% if getIt[i][2]%}{{getIt[i][2]}}{%else%}Non definito{%endif%}</td>
                <td>{% if getIt[i][4] %}{{getIt[i][4]}}{%else%}Sconosciuto{%endif%}</td>
                <td>{% if getIt[i][5] %}{{getIt[i][5]}}{%else%}Non indicata {%endif%}</td>
                <td>{% if getIt[i][6] %}{{getIt[i][6]}}{%else%}Non indicata {%endif%}</td>
              </tr>
              <div class="modal fade" id="staticit{{i}}" data-bs-backdrop="static" data-bs-keyboard="false"
                tabindex="-1" aria-labelledby="staticitLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="staticitLabel">{{getIt[i][2]}}</h1>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <form action="/portafoglio/modifyIt/{{getIt[i][0]}}" method="POST">
                      <div class="modal-body">
                        <div class="row">
                          <input type="hidden" name="idClienteModifyIt" id="idCliente"
                            value="{{current_cliente.idcliente}}">
                          <!-- Form Group (username)-->
                          <div class="row gx-3 mb-3">
                            <div class="col-md-4">
                              <label class="small mb-1" for="servizioModify">Servizio</label>
                              <input class="form-control cftr" name="servizioModify" id="servizioModify" type="text"
                                value="{{getIt[i][2]}}">
                            </div>
                            <div class="col-md-4">
                              <label class="small mb-1" for="quantitaModify">Quantita</label>
                              <input class="form-control cftr" name="quantitaModify" id="quantitaModify" type="number"
                                value="{{getIt[i][3]}}">
                            </div>
                            <div class="col-md-4">
                              <label class="small mb-1" for="tguModify">TGU</label>
                              <input class="form-control cftr" name="tguModify" id="tguModify" type="text"
                                value="{{getIt[i][4]}}">
                            </div>
                          </div>
                          <!-- Form Row-->
                          <div class="row gx-3 mb-3">
                            <!-- Form Group (first name)-->
                            <div class="col-md-6">
                              <label class="small mb-1" for="dataAttivazioneModify">Data Attivazione</label>
                              <input class="form-control cftr" name="dataAttivazioneModify" id="dataAttivazioneModify"
                                type="date" value="{{getIt[i][5]}}" required>
                            </div>
                            <!-- Form Group (last name)-->
                            <div class="col-md-6">
                              <label class="small mb-1" for="dataScadenzaModify">Data Scadenza</label>
                              <input class="form-control cftr" name="dataScadenzaModify" id="dataScadenzaModify"
                                type="date" value="{{getIt[i][6]}}">

                            </div>
                          </div>
                          <!-- Form Row        -->
                          <div class="row gx-3 mb-3">
                            <!-- Da mettere type float -->
                            <div class="col-md-6">
                              <label class="small mb-1" for="canoneAnnuoModify">Canone Annuo</label>
                              <input class="form-control cftr" name="canoneAnnuoModify" id="canoneAnnuoModify"
                                type="number" value="{{getIt[i][7]}}" required>
                            </div>
                            <div class="col-md-6">
                              <label class="small mb-1" for="canoneMeseModify">Canone Mese</label>
                              <input class="form-control cftr" name="canoneMeseModify" id="canoneMeseModify"
                                type="number" value="{{getIt[i][8]}}" required>
                            </div>
                          </div>

                        </div>
                        <!-- Save changes button-->
                        <button class="btn btn-primary" type="submit" style="float: left;">Salva le modifiche</button>
                        <button class="btn btn-danger" onclick="deleteItData({{getIt[i][0]}})" type="button"
                          style="float: right;">Elimina</button>
                      </div>

                  </div>

                  </form>
                </div>
              </div>
        </div>
        {% endfor %}
        </tbody>
        </table>

      </div>
  </div>


  {%endif%}

  <div class="col mb-4">
    <h1 class="page-heading my-5">Aggiungi nuovo IT</h1>
    <div class="card mb-4" id="formIt">
      <div class="card-header">Nuovo IT</div>
      <div class="card-body">
        <form action="/portafoglio/addItForm" method="POST">
          <div class="row">
            <input type="hidden" name="idClienteAddIt" id="idCliente" value="{{current_cliente.idcliente}}">
            <!-- Form Group (username)-->
            <div class="row gx-3 mb-3">
              <div class="col-md-4">
                <label class="small mb-1" for="servizioAdd">Servizio</label>
                <input class="form-control cfit" name="servizioAdd" id="servizioAdd" type="text" value="">
              </div>
              <div class="col-md-4">
                <label class="small mb-1" for="quantitaAdd">Quantita</label>
                <input class="form-control cfit" name="quantitaAdd" id="quantitaAdd" type="number" value="">
              </div>
              <div class="col-md-4">
                <label class="small mb-1" for="tguAdd">TGU</label>
                <input class="form-control cfit" name="tguAdd" id="tguAdd" type="text" value="">
              </div>
            </div>
            <!-- Form Row-->
            <div class="row gx-3 mb-3">
              <!-- Form Group (first name)-->
              <div class="col-md-6">
                <label class="small mb-1" for="dataAttivazioneAdd">Data Attivazione</label>
                <input class="form-control cfit" name="dataAttivazioneAdd" id="dataAttivazioneAdd" type="date" value=""
                  required>
              </div>
              <!-- Form Group (last name)-->
              <div class="col-md-6">
                <label class="small mb-1" for="dataScadenzaAdd">Data Scadenza</label>
                <input class="form-control cfit" name="dataScadenzaAdd" id="dataScadenzaAdd" type="date" value=""
                  required>

              </div>
            </div>
            <!-- Form Row        -->
            <div class="row gx-3 mb-3">
              <!-- Da mettere type float -->
              <div class="col-md-6">
                <label class="small mb-1" for="canoneAnnuoAdd">Canone Annuo</label>
                <input class="form-control cfit" name="canoneAnnuoAdd" id="canoneAnnuoAdd" type="number" value="">
              </div>
              <div class="col-md-6">
                <label class="small mb-1" for="canoneMeseAdd">Canone Mese</label>
                <input class="form-control cfit" name="canoneMeseAdd" id="canoneMeseAdd" type="number" value="">
              </div>
            </div>
            <!-- Save changes button-->

          </div>
          <button class="btn btn-primary" type="submit" style="float: left;" id="btnCreaTrattativa">Aggiungi IT</button>
          <button class="btn btn-primary" type="button" style="float: right;" id="cleanFormTrattativa"
            onclick="clean('cfit')">Pulisci
            tutto</button>
        </form>
      </div>
    </div>
  </div>

  </section>
  <div class="panel-group" id="fixedbutton">
    <p>
    <div class="collapse" id="collapseExample">


      <div class=" card card-body mb-2">
        <input class="form-control mb-2" type="text" id="myInput2" onkeyup="myFunction(2)" onclick="showUp(this,2)"
          title="Type in a name">
        <ul id="myUL2" class="myUL vertical-scrollable list-group">
          {% if contatti %}
          {% for contatto in contatti%}
          <input type="hidden" value="{{contatto.idcontatto}}">
          <li class="list-group-item" onclick="getName(this,2, '{{contatto.nome}}')">
            {% if contatto.nome%}
            {{contatto.nome}}
            {%endif%}
            {%if contatto.secondoNome
            %}{{contatto.secondoNome}} {%endif%} {{contatto.cognome}}</li>
          {% endfor %}
          {%endif%}
        </ul>
      </div>
    </div>
    <button class="btn btn-primary mt-2" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample"
      aria-expanded="false" aria-controls="collapseExample">
      <i class="fa-solid fa-address-book"></i>
    </button>
    </p>
  </div>
</div>
<div>

</div>
<footer class="footer bg-white shadow align-self-end py-3 px-xl-5 w-100">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-6 text-center text-md-start fw-bold">
        <p class="mb-2 mb-md-0 fw-bold">MP © 2024</p>
      </div>
      <div class="col-md-6 text-center text-md-end text-gray-400">
        <p class="mb-0">Version 1.0.0</p>
      </div>
    </div>
  </div>
</footer>
</div>
{% if message %}
<div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 20000;">
  <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header">
      <strong class="me-auto">{{titolo}}</strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body">
      {{message}}
    </div>
  </div>
</div>
{%endif%}



<script>
  function hideAddCliente() {
    document.getElementById("crea").style.display = "none";
    document.getElementById("modifica").style.display = "block";
  }
  /* const toastLiveExample = document.getElementById('liveToast');
   const toast = new bootstrap.Toast(toastLiveExample);
   toast.show();*/

  function showTrattativaFile(el) {
    el.style.display = "none";
    document.getElementById("formTrattativa").style.display = "none";
    document.getElementById("btnTrattativa").style.display = "block";
    document.getElementById("trattativaFile").style.display = "block";
    document.getElementById("formTrattativa").style.display = "none";
  }

  function showTrattativa(el) {
    el.style.display = "none";

    document.getElementById("trattativaFile").style.display = "none";
    document.getElementById("btnTrattativaFile").style.display = "block";
    document.getElementById("formTrattativa").style.display = "block";

    setLocal('cftr');
  }


  function showUp(el, val) {
    el.value = "";
    namemyUL = "myUL";

    if (val == 2)
      namemyUL += "2"
    document.getElementById(namemyUL).style.display = "block";
  }

  function myFunction(val) {
    var input, filter, ul, li, i, txtValue;
    nameInput = "myInput";
    namemyUL = "myUL"
    if (val == 2) {
      nameInput += "2"
      namemyUL += "2"
    }
    input = document.getElementById(nameInput);
    filter = input.value.toUpperCase();
    ul = document.getElementById(namemyUL);
    input = ul.getElementsByTagName("li");
    for (i = 0; i < input.length; i++) {

      txtValue = input[i].innerHTML;
      if (txtValue.toUpperCase().indexOf(filter) > -1) {
        input[i].style.display = "";
      } else {
        input[i].style.display = "none";
      }
    }
  }

  function getName(el, val, contatto) {
    console.log(el);
    console.log(el.previousElementSibling);

    idsearch = el.previousElementSibling.value.trim();
    alert("idsearc: " + idsearch);
    nameInput = "myInput";
    namemyUL = "myUL";
    if (val == 2) {
      nameInput += "2";
      namemyUL += "2";
    }
    var xhr = new XMLHttpRequest();
    xhr.open("POST", '/portafoglio/getCliente/' + idsearch, true);
    xhr.send();
    /*document.getElementById("idSearch").value = el.previousElementSibling.value.trim();
    document.getElementById(nameInput).value = el.innerHTML.trim();
    document.getElementById(namemyUL).style.display = "none";
    */
  }

  function setFase(el) {
    let s = document.getElementById("faseOptions");
    let selected = s.options[s.selectedIndex].value;
    document.getElementById("faseModify").value = selected;
  }

  function setCategoria(el) {
    let s = document.getElementById("categoriaOptions");
    let selected = s.options[s.selectedIndex].value;
    document.getElementById("categoriaOffertaITModify").value = selected;
  }
  setLocal('cfit')
  function setLocal(val) {
    obj = document.getElementsByClassName(val)
    for (let item of obj) {

      item.addEventListener("change", function () {
        localStorage.setItem("add" + item.name, item.value);
      })
    }

    for (let item of obj) {
      item.value = localStorage.getItem("add" + item.name);
    }
  }


  function clean(val) {
    obj = document.getElementsByClassName(val);
    for (let item of obj) {
      item.value = "";
      localStorage.setItem("add" + item.name, "");
    }
  }


  function eliminaCliente(val) {
    Swal.fire({
      title: "Sei sicuro?",
      text: "Una volta eliminato, non potrà essere ripristinato!",
      icon: "warning",
      showCancelButton: true,
      confirmButtonColor: "#3085d6",
      cancelButtonColor: "#d33",
      confirmButtonText: "Elimina",
      cancelButtonText: 'Indietro'
    }).then((result) => {
      if (result.isConfirmed) {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", '/portafoglio/removeCliente/' + val, false);
        xhr.send();
        location.reload();
      }
    });

  }


  function sendData(val) {
    Swal.fire({
      title: "Sei sicuro?",
      text: "Una volta eliminata, non potrà essere ripristinata!",
      icon: "warning",
      showCancelButton: true,
      confirmButtonColor: "#3085d6",
      cancelButtonColor: "#d33",
      confirmButtonText: "Elimina",
      cancelButtonText: 'Indietro'
    }).then((result) => {
      if (result.isConfirmed) {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", '/portafoglio/remove/' + val, false);
        xhr.send();
        location.reload();
      }
    });

  }

  function deleteItData(val) {
    Swal.fire({
      title: "Sei sicuro?",
      text: "Una volta eliminato, non potrà essere ripristinato!",
      icon: "warning",
      showCancelButton: true,
      confirmButtonColor: "#3085d6",
      cancelButtonColor: "#d33",
      confirmButtonText: "Elimina",
      cancelButtonText: 'Indietro'
    }).then((result) => {
      if (result.isConfirmed) {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", '/portafoglio/removeIt/' + val, false);
        xhr.send();
        location.reload();
      }
    });

  }

  document.getElementById("btnCrea").addEventListener("click", function () {
    document.getElementById("modifica").style.display = "None";
    document.getElementById("crea").style.display = "block";

    setLocal('cfcl');
  });

  console.log(document.getElementById("myInput").value);
  if (document.getElementById("myInput").value === "") {
    document.getElementById("myUL").style.display = "block";
  } else {
    document.getElementById("myUL").style.display = "none";
  }

  var currentTab = 0; // Current tab is set to be the first tab (0)
  showTab(currentTab); // Display the current tab

  function showTab(n) {
    // This function will display the specified tab of the form...
    var x = document.getElementsByClassName("step");
    x[n].style.display = "block";
    //... and fix the Previous/Next buttons:
    if (n == 0) {
      document.getElementById("prevBtn").style.display = "none";
    } else {
      document.getElementById("prevBtn").style.display = "inline";
    }
    if (n == (x.length - 1)) {
      document.getElementById("nextBtn").innerHTML = "CREA";
    } else {
      document.getElementById("nextBtn").innerHTML = "Next";
    }
    //... and run a function that will display the correct step indicator:
    fixStepIndicator(n)
  }

  function nextPrev(n) {
    // This function will figure out which tab to display
    var x = document.getElementsByClassName("step");
    // Exit the function if any field in the current tab is invalid:
    if (n == 1 && !validateForm()) return false;
    // Hide the current tab:
    x[currentTab].style.display = "none";
    // Increase or decrease the current tab by 1:
    currentTab = currentTab + n;
    // if you have reached the end of the form...
    if (currentTab >= x.length) {
      // ... the form gets submitted:
      document.getElementById("signUpForm").submit();
      return false;
    }
    // Otherwise, display the correct tab:
    showTab(currentTab);
  }

  function validateForm() {
    // This function deals with validation of the form fields
    var x, y, i, valid = true;
    x = document.getElementsByClassName("step");
    y = x[currentTab].getElementsByTagName("input");
    // A loop that checks every input field in the current tab:
    for (i = 0; i < y.length; i++) {
      // If a field is empty...
      if (y[i].value == "") {
        // add an "invalid" class to the field:
        y[i].className += " invalid";
        // and set the current valid status to false
        valid = false;
      }
    }
    // If the valid status is true, mark the step as finished and valid:
    if (valid) {
      document.getElementsByClassName("stepIndicator")[currentTab].className += " finish";
    }
    return valid; // return the valid status
  }

  function fixStepIndicator(n) {
    // This function removes the "active" class of all steps...
    var i, x = document.getElementsByClassName("stepIndicator");
    for (i = 0; i < x.length; i++) {
      x[i].className = x[i].className.replace(" active", "");
    }
    //... and adds the "active" class on the current step:
    x[n].className += " active";
  }
</script>

{% endblock %}